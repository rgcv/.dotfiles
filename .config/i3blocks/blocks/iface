#!/bin/sh
# requires:
#   iw (iw, iface link connection info)
# uses:
#   xgetres (xgetres, retrieve X resource values)
set -eu

markup=${markup-}
AF=${AF-inet6?}

iface=${BLOCK_INSTANCE-$(ip route | awk '/^default/ {print $5; exit}')}
# no default route
[ -z "$iface" ] && exit
# interface missing
[ ! -d "/sys/class/net/$iface" ] && exit

icon=ï‡«
[ "$markup" = pango ] && icon="<b>$icon</b>"

addr=$(ip addr show dev "$iface" | awk "/$AF/ {print \$2; exit}")
addr=${addr%/*}

echo "$icon $addr"
echo "$icon"
xgetres i3.color10 || echo "#55ff55"
