#!/bin/sh
# requires:
#   bemenu (bemenu, option selection)
#   i3:
#     i3-msg (i3, exiting i3)
#   sway:
#     swaymsg (sway, exiting sway)
set -eu

menu="with-env bemenu"
choice=$($menu -i -p System <<EOF | tr '[:upper:]' '[:lower:]'
Logout
Suspend
Restart
Hibernate
Shutdown
EOF
)

[ -n "$choice" ] || exit
case $(printf 'no\nyes' | $menu -p "Are you sure you want to $choice?") in
  y*) ;;
   *) exit ;;
esac

sync

case $choice in
  logout) loginctl terminate-user "$USER" ;;
  restart)  systemctl reboot    ;;
  shutdown) systemctl poweroff  ;;
  *)        systemctl "$choice" ;;
esac

