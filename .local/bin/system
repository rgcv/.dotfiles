#!/bin/sh
# requires:
#   bemenu (bemenu, option selection)
#   i3:
#     i3-msg (i3, exiting i3)
#   sway:
#     swaymsg (sway, exiting sway)
set -eu

choice=$(bemenu -i -p System <<EOF | awk '{print tolower($0)}'
Logout
Suspend
Restart
Hibernate
Shutdown
EOF
)

[ -n "$choice" ] || exit
confirm=$(printf 'no\nyes' | bemenu -p "Are you sure you want to $choice?")
[ "$confirm" = yes ] || exit

sync

case $choice in
  logout)
    if [ -n "${SWAYLOCK-}" ]; then
      swaymsg exit
    else
      i3-msg exit
    fi ;;
  restart)  systemctl reboot    ;;
  shutdown) systemctl poweroff  ;;
  *)        systemctl "$choice" ;;
esac

